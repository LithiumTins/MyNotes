# 关系模型简述
有以下三个要素

## 基本结构
关系：一个存储数据的表格

## 基本操作
- 并： $\cup$
- 差： $-$
- 笛卡尔积： $\times$
- 选择： $\sigma$
- 投影： $\Pi$
- 连接： $\bowtie$
- 除： $\div$

## 完整性约束
- 实体完整性
- 参照完整性
- 用户自定义的完整性

<br><br>

# 关系与关系模型
一些基本概念

## 关系
理论上，关系不允许有相同的分组。但在实际应用中则不是。

### 属性
一列，也叫字段，具有属性名。列的取值范围称为**域**，其中元素的个数称为**基数**。

### 元组
一行，也叫记录。元组中其中一个值称为**分量**，具有 $n$ 个分量的元组称为 $n$-元组。

### 关系模式
关系可以用如下形式表示：
$$
R(A_1:D_1, A_2:D_2, \cdots, A_n:D_n)
$$
其中 $R$ 是关系名，$A_i$ 是属性，$D_i$ 是域。这称为关系模式或表标题。

### 基数
关系中元组的个数称为**基数**。也称为**度**。

### 属性不可再分（关系第一范式）
不能有一个属性具有多个子属性，如称谓属性由子属性姓和名组成。

### 候选键（码）
取值可以唯一标识一个元组的、不可去除其中任何一个属性的属性组。

### 主键（码）
可以从候选键中选择一个作为主键。

### 主属性
存在于所有候选键中的属性。否则称为**非主属性**。

### 外键（码）
对于两个关系 $R$ 和 $S$，对于 $R$ 中的属性组，如果它不是 $R$ 的候选键，但是是 $S$ 的候选键，则称为 $R$ 的外键。

## 完整性
关系中的一些约束条件。

### 实体完整性
关系中的主键不能取空值。

### 参照完整性
如果关系 $R$ 中的属性组 $A_R$ 是对应于 $S$ 中候选键 $A_S$ 的外键，则 $R$ 中的属性组 $A_R$ 的每个值必须是 $S$ 中属性组 $A_S$ 的某个值，或者是空值。

### 用户自定义完整性
用户可以自定义一些完整性约束，如年龄不能为负数。

<br><br>

# 关系代数运算
作用于关系的一种抽象的数学运算。

## 集合运算
可以普遍用于集合的运算。

### 并
要求两个关系**并相容**：
- 属性数目相同
- 相对应的属性的域相同

### 差
同样要求两个关系并相容

### 交
同样要求两个关系并相容

### 广义笛卡尔积
没有要求。由于关系的列可交换性，所以 $R \times S = S \times R$。

## 关系运算
关系独有的运算。

### 选择
$$
\sigma_{con}(R)
$$
从关系 $R$ 中选出满足条件 $con$ 的元组构成新的关系。

### 投影
$$
\Pi_{A_1, A_2, \cdots, A_n}(R)
$$
从关系 $R$ 中选出属性 $A_1, A_2, \cdots, A_n$ 构成新的关系。

### $\theta$-连接
$$
R \underset{A \theta B} \bowtie S
$$
从关系 $R$ 和 $S$ 的笛卡尔积中选出满足 $A \theta B$ 的元组构成新的关系。<br>
特别地，用 $<>$ 表示不等于。

### 自然连接
$$
R \bowtie S
$$
如果 $R$ 和 $S$ 中有相同的**属性组**，则自然连接根据这个属性组做等值连接，并且在结果中只保留其中一个属性组。

### 外连接
自然连接在某个元组没有匹配上的时候，不会出现在结果中。外连接对于这样的元组，保留它们并把剩余的属性组填充空值。分为
- 左外连接：⟕
- 右外连接：⟖
- 全外连接：⟗

### 除
$$
R \div S
$$
对于关系 $R$ 和 $S$，如果 $S$ 的属性集是 $R$ 的属性集的子集，则 $R \div S$ 从 $R$ 中选出相应属性组等于 $S$ 中的属性组的元组，然后删除 $R$ 中的 $S$ 的属性组并去除重复元组。